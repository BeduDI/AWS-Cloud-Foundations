## Postwork Sesión X


### 1. Objetivo :dart:
- Conocer y configurar un entorno de red como piedra angular en el establecimiento de una infraestructura.


### 2. Requisitos :clipboard:
- Acces a AWS Console.
- Diagrama del proyecto a la mano.
- Calculadora CIDR


### 3. Desarrollo :bookmark_tabs:

Antes de generar un esquema de red y subredes es necesaria la generación de un diagrama con los elementos principales a fin de conocer los requerimientos de red de estos.
En el diagrama del proyecto se identifican como elementos dependientes de una VPC o red a la base de datos RDS, las instancias EC2 y balanceadores de carga.

Para generar un esquema DMZ donde la capa de persistencia de datos (bases de datos) sean inaccesibles desde el mundo exterior se requerirá generar una res pública y privada.
La red pública puede ser alcanzada por cualquier dispositivo desde internet, la red privada no puede ser alcanzada desde internet directamente.

1. Acceder a la sección VPC desde la consola de administración de AWS.

![pw1-access-vpn.png](pw1-access-vpc-menu.png)

2. Se observan ya algunos dispositivos a pesar de no haber configurado nada previamente, esto sucede ya que todas las regiones tienen una VPC por defecto, para que esta VPC funcione se hay dispositivos adicionales que deben ser configurados como Security Groups, DHCP, Routing Table, Internet Gateway y Network ACL. Dar click en "VPCs"

![pw1-dispositivos-default.png](pw1-access-vpc.png)


3. Se accederá al panel de redes VPC, se observará una red VPC por defecto, dar clic en "Create VPC"
![pw1-create-vpc.png](pw1-create-vpc.png)

4. Se establecen:
a) Nombre de la VPC, se recomienda un nombre descriptivo, en este caso se hace referencia a la región a la que pertenece y el entorno en este producción, una forma de segmentar entornos de desarrollo y stagging es por medio de redes VPC.
b) Se debe asignar el bloque de direcciones IP que tendrá la red completa, para el ejemplo, esta red con máscara 16 dará para configurar aproximadamente 256 redes con 256 direcciones IP disponibles en cada red. (Es aproximado por que AWS tomas algunas IP para su gestión interna)
c) No se usará IPv6
d) Se selecciona la opción default para decir a AWS que no se desea hardware de red dedicado.
e) Asignar alguna Tag con fines administrativos y de identificación.
![pw1-establish-vpc-parameters.png](pw1-establish-vpc-parameters.png)

Después de algunos segundos la VPC ha sido creada.
![pw1-vpc-created.png](pw1-vpc-created.png)

5. Para la generación de la res pública se deberá seleccionar  "Subnets"

![pw1-choose-subnets.png](pw1-choose-subnets.png)

6. Se observan varias subredes, observando el espacio de direcciones IP de cada una y la VPC a la que pertenecen se deduce que son redes de la VPC por defecto. Se deberá dar click en "Create Subnet"
![pw1-create-subnet.png](pw1-create-subnet.png)

7. Se establecen los siguientes valores para la configuración de la red pública:
a) El nombre que la red tendrá.
b) La VPC a la que pertenecerá esta subred, seleccionar la VPC recién generada.
c) Se permite que AWS seleccione la zona de disponibilidad.
d) Se establece el tamaño de una subred, para este caso se establece un bloque con máscara 24 lo que quiere decir que este bloque tendrá 256 direcciones IP disponibles (marca menos porque AWS toma algunas para gestión interna). Cabe mencionar que este es solo un bloque de direcciones de los 256 que se pueden hacer por la mascara 16 seleccionada para la VPC.
![pw1-public-network.png](pw1-public-network.png)

Después de algunos segundos la red es creada.
![pw1-subnet-created.png](pw1-subnet-created.png)

![pw1-public-subnet-done.png](pw1-public-subnet-done.png)

8. Para dar acceso a la red pública desde internet y hacia internet hay que crear un Internet Gateway.

Habrá que dirigirse al menú izquierdo a la parte de "Internet Gateway" (a), después hacer click en "Create internet gateway".
![pw1-add-ig.png](pw1-add-ig.png)

9. Establecer un nombre al internet gateway, click en "Create internet gateway" para generarlo.

![pw1-create-ig-name.png](pw1-create-ig-name.png)

10. Una vez creado el Internet Gateway (a.k.a IG) se puede observar que no se encuentra asociado a ninguna red VPC, para asociarlo habrá que hacer click en "Attach in VPC" (a)

![pw1-attach-ig-to-vpc.png](pw1-attach-ig-to-vpc.png)

11. Seleccionar la VPC acabada de crear y dar click en "Attach internet gateway"
![pw1-assing-ig-to-vpc.png](pw1-assing-ig-to-vpc.png)

Hasta ahora el avance en el proyecto es el siguiente. ¡Felicidades!
![pw1-Overview-vpc-networks](pw1-Overview-vpc-networks.png)


